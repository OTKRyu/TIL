# 웹서버 개발시 주의점

개발자의 기본적으로 언어를 이용해 메모리에 있는 값들을 조작해 원하는 기능을 만든다.

하지만 서버가 생기면서 데이터를 사용자의 로컬 메모리뿐만 아니라 서버쪽에서도 관리하게 되었다.

그러다보니 서버쪽의 데이터가 더 중시되게 되었고 클라이언트쪽을 의심을 하게됐다.

뿐만아니라 보안면에서의 문제때문에 대부분의 연산을 서버에서 하게 되었다.

결국 클라이언트를 마냐 믿지 않아야한다는 것이다.

결국 개발자는 돌려보고 안 되면 디버그해보고, 사용 라이브러리 같은 것들에 로그 잘 보고 고치는 것이다.

## http

- hyper text transfer protocol
- stateless
- http 서버는 불특정 다수의 요청을 전제
- 클라이언트 유지가 안 됨, 이를 위해서 세션이나 쿠키 jwt등을 사용하게 됨

## 주의해야할 점들

- 사용자를 의심해야한다.
  - 사용자 인증
  - 서버 중심의 견고한 로직 처리
  - 사용자 요청의 유효성 검증
  - sql injection, xss 방어
  - 클라이언트 요청
    - 회원가입시 클라이언트쪽에서 어떤 인증을 받았는지 토큰값과 같은 것으로 인증
  - sql injection
    - 입력 값에 db query를 날리는 경우
    - orm이 대체로 이런 것들을 막아놓긴 하는데, override같은 거 할 경우 문제가 생길 수 있다.
  - dos 
    - nginx를 사용하면 최소한의 장치는 마련할 수 있다.
    - 관심을 가지고 설정을 해볼 수는 있다.
  - xss
    - cross site scripting
    - 악의적인 해커의 url로 사용자 주요 정보 전송
  - 예시
    - 현대카드
      - 게시판 파일 업로드 기능으로 jsp 파일 업로드 허용
      - jsp 파일 내에 특정 테이블 조회 기능 구현

- 개발자측도 의심해야한다.
  - 1이 아닌 n개의 클라이언트 요청
  - 적절한 응답 시간과 데이터 신뢰성
  - 트랜잭션 처리 여부
  - 서비스 및 컨텐츠 사용 권한
  - 주요 데이터 암호화
  - 부하 테스트
    - 여러명의 요청에도 잘 버티는가
    - jmeter와 같은 도구를 활용하여 부하 테스트
  - 응답 시간
    - 응답 시간을 줄이기 위해 캐시 layer 적용 고려
  - 데이터 신뢰성
    - multi-thread 환경에서의 concurrency
      - thread safe한가
      - 성능은 좀 떨어질수도 있지만, 신뢰성과 비교해서 더 높은 쪽을 선택해야한다.
    - db
      - 쿼리문중 위험한 것들에 대해서는 명시적으로 lock를 건다.
      - 트랜잭션
- log
  - 서버가 작동하면서 발생하는 주요 이슈들을 기록
  - 단순 콘솔 출력보다는 주요 logger 사용
- 서버 테스트 시나리오
  - 복수개의 요청은 수행해봐야 함
  - 눈에 보이지 않는 비 기능 요소에 대한 테스트 시나리오 작성
  - 테스트할 내용을 안다는것 자체로 sw 역량 인증

