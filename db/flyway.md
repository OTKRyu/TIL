# flyway

- open-source database migration tool

- database version control

## 형상관리

- db도 형상관리가 필요하다
- 정확히는 db의 데이터는 백업이 관리하겠지만, db의 스키마의 변화를 추적할 필요가 있다.
- 개발인원들이 모두 같은 db를 가지고 작업하는게 아니기 때문에, db가 여러 개 생기는  문제도 생긴다.
- 형상관리가 안 될 경우 문제점
  - 이 머신에서의 db의 상태는 어떤지
  - sql 스크립트가 적용되었는지
  - 프로덕션 db에 긴급한 변경사항이 생겼을 경우, test db에도 적용이 됐는지
  - 예전 버전에서 디버깅하려니 현재 db scheme과 일치하는지
  - 새로운 db 인스턴스를 어떻게 설정할 것인지

## 사용법

1. 다운로드 후 압축해제
2. db프로그램에 연결 및 계정생성
3. sql 쿼리문을 날린다.
4. flyway가 이 sql 쿼리문들을 history에 저장해놓는다.
5. 이를 공유해서 실행하면 공통의 db를 가질 수 있다.
6. cli로 의존성을 추가한뒤 빌드방식에 따라 실행시키면 된다.

## 정리

- 각각의 환경에 대한 수동 db 변경 소요시간 줄일 수 있음
- db 변경 누락으로 인한 오류 줄일 수 있음
- 코드 변경과 db 변경의 추적 개선
- 새로운 db를 처음부터 만드는 것이 가능
- ci/c와 통합 적용
- java말고도 여러 언어를 지원