# git

## git의 원리
3가지 단계로 폴더, 스테이지, commits으로 이루어져 있다.
변경사항을 추적해 변한 사항들을 add명령어로 스테이지에 올리고 commit명령어로 commits에 모은다.
commits을 기반으로 변경사항을 추적한다.
이 커밋들의 흐름을 브랜치로 제어한다.
master나 main은 이 브랜치로 나눠지기 전의 큰 줄기이다.
브랜치의 가지가 여러개로 나눠질 수 있고 이를 결국 큰 줄기에 합쳐서 프로젝트를 진행해야 하는데, 이 때 합쳐지면서 3가지 정도의 타입이 있다.
이것이 패스트포워딩, 새 커밋으로 머지, conflit발생이다.
패스트포워딩은 아무일없이 브랜치를 따라 큰 줄기가 확장된 경우이다
새 커밋으로 머지는 큰 줄기와는 조금 차이가 있어서 새 커밋에 합쳐지는 줄기에서의 변경사항을 모두 반영한뒤 머지되는 것이다.
conflict발생은 수정내용중 충돌이 일어나는 경우인데, 이 경우 사람이 직접 수정해줘야 머지가 완료된다.

## github으로 협업하기
1. 깃헙계정으로 리포를 만든다
	
	- 이 때 리포설정을 github에 만들면 알아서 첫번재 커밋까지 찍어버리기 때문에 권장하지 않은다.
2. 협업할 사람을 그 리포에 초대한다.
3. local 브랜치에서 작업

   - 이 때 순서대로 pull, push를 제대로 했다면 문제없이 잘 간다.

   - 다만, 두 명의 push가 같은 commit에서 이루어진다면, 늦은 쪽의 commit이 거부된다.

   - 이후 거부된 쪽의 커밋에게 pull할 것을 요구하며 pull할경우 conflict가 일어날 수 있고 이를 merge해주길 요구한다.

   - merge해서 다시 push하면 문제없이 다음으로 넘어간다.
4. remote의 브랜치 작성
5. 이를 merge해야될 때 remote에서 협의후 진행
6. 협의가 잘 되면 remote에서의 결과를 pull해서 가져와서 local의 branch와 merge 혹은 그냥 remote의 것으로 이동
7. 3~6을 반복

## remote에서 브랜치 관리

깃랩, 깃허브 등 깃을 관리할 수 있는 사이트들은 대부분 merge기능을 구현해 놨으므로 local에서 하듯이 사이트에서도 이를 merge할 수 있다. 이 방법은 사이트마다 다르므로 사이트 안내사항을 따르기 바란다. 깃랩의 경우 merge request라는 이름으로, 깃허브의 경우 pull request라는 이름으로 이 기능이 구현되어 있다.

이 기능을 이용하면 깃랩이나 깃허브에서 코드를 수정할 수 있는데 권장하진 않는다.

결국 git에서의 commit관리는 브랜치 단위로 사용되므로 브랜치의 구조 자체를 일괄적으로 움직이는 방법은 있는지 모르겠다.

고로 각각의 브랜치를 병합하고 나서의 처리는 각자의 working directory에서 해줘야할 일이다.

issue기능을 이용하여 코드에 대한 제보를 할 수 있다.

어느 코드에 대한 건지를 지정할 수 있는데 이것을 링크를 통하여 알려줄 수 있다. 이 때 깃랩에서 실제 코드까지 이동한뒤 어떤 곳인지 클릭해서 만들 수도 있고, 그냥 써줄 수도 있다.

fork 기능은 프로젝트를 통쨰로 복사하여 내 계정에 추가하는 기능이다. 다만 이는 remote에서 remote로 복사하는 작업이므로 가져와서 새로 working directory에서 작업을 하려면 clone을 떠 줘야 한다.

그리고 이 fork 기능은 원본 프로젝트에서 복사본을 떠 온 것이기 때문에 원본과의 연결이 남아있는데, 이를 이용하여 fork에서의 변경사항을 원본에 병합시켜주기를 요청할 수 있다. 다만 깃랩의 경우 병합시의 conflict를 remote상에서 해결하기 위한 추가 기능들에 대한 준비가 딱히 되어 있지는 않으므로 이런 경우 conflict를 안 일으키도록 코드를 수정하든가, local로 끌고가서 해결을 해야한다.

fork기능은 기본적으로 개발자로 함께 소속되어 있는 사람들을 위한 것이 아니다. 오픈 소스지만 수정에 대한 건의사항이나 새로운 변경안을 들고 온 사람들을 위한 기능이라고 볼 수 있다.